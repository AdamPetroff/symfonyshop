{% extends 'admin/layout.html.twig' %}

{% macro recursion(rubrics) %}
    {% for rubric in rubrics %}
        <li>Id: {{ rubric.getId() }}</li>
        <li>Name: {{ rubric.getName() }}</li>
        <li>Description: {{ rubric.getDescription() }}</li>
        {#<li>Created at: {{ rubric.getCreatedAt() }}</li>#}
        <li><a href="{{ path('admin_blog_edit_rubric', {'id' : rubric.getId()}) }}">Edit</a><br /><br /></li>
        {% if rubric.articles is not empty %}
            <li>
                <span><b>Articles:</b></span>
                <ul>
                    {% for article in rubric.articles %}
                        <li><a href="{{ path('admin_blog_edit_article', {'id': article.id}) }}">{{ article.name }}</a></li>
                    {% endfor %}
                </ul>
            </li>
        {% endif %}
        {% if rubric.getChildren() is not empty %}
            <li>
                <span><b>Subrubrics:</b></span>
                <ul>
                    {{ _self.recursion(rubric.getChildren()) }}
                </ul>
            </li>
        {% endif %}
    {% endfor %}
{% endmacro %}

{% block content %}
    <h2>Rubrics and articles</h2>
    <ul>
        {{ _self.recursion(rubrics) }}
    </ul>
    <a href="{{ path('admin_blog_new_rubric') }}">new rubric</a>

    {#<h1>Articles</h1>#}
    {#<ul>#}
    {#{% for article in articles %}#}
        {#<li>#}
            {#<ul>#}
                {#<li>Id: {{ article.getId() }}</li>#}
                {#<li>Name: {{ article.getName() }}</li>#}
                {#<li>Perex: {{ article.getPerex()|raw }}</li>#}
                {#<li>Text: {{ article.getText()|raw }}#}
                {#<li><a href="{{ path('admin_blog_edit_article', {'id' : article.getId()}) }}">Edit</a><br /><br /></li>#}
            {#</ul>#}
        {#</li>#}
    {#{% endfor %}#}
    {#</ul>#}
    <a href="{{ path('admin_blog_new_article') }}">new article</a>
{%  endblock %}